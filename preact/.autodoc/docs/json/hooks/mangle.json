{
  "fileName": "mangle.json",
  "filePath": "hooks/mangle.json",
  "url": "https://github.com/preactjs/preact/hooks/mangle.json",
  "summary": "The purpose of this code is to control the mangling of protected/private properties in order to ensure consistent property names in minified builds. \n\nIn minified builds, property names are often shortened to reduce the size of the code. However, this can lead to issues when properties with the same name are used in different contexts. This code addresses this issue by providing a way to specify a regular expression pattern for matching protected/private properties and a list of reserved property names that should not be mangled.\n\nThe `minify` object contains a `mangle` object, which in turn contains a `properties` object. The `properties` object has two properties: `regex` and `reserved`. \n\nThe `regex` property is a regular expression pattern that is used to match protected/private properties. In this case, the pattern is `^_[^_]`, which matches any property that starts with an underscore followed by any character except an underscore. This pattern is commonly used to indicate protected/private properties in JavaScript.\n\nThe `reserved` property is an array of reserved property names that should not be mangled. These reserved property names include \"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\", \"__REACT_DEVTOOLS_GLOBAL_HOOK__\", \"__PREACT_DEVTOOLS__\", \"_renderers\", \"__source\", and \"__self\". By including these property names in the reserved list, they will not be shortened or modified during the minification process.\n\nBy controlling the mangling of protected/private properties and specifying reserved property names, this code ensures that minified builds have consistent property names and avoids any potential collisions or issues that may arise from property name conflicts.\n\nHere is an example of how this code may be used in the larger project:\n\n```javascript\n// Preact code\n\n// Import the minify configuration\nimport minifyConfig from 'path/to/minify-config.json';\n\n// Use the minify configuration to control property mangling\nfunction minifyCode(code) {\n  // Apply the regular expression pattern to match protected/private properties\n  const regex = new RegExp(minifyConfig.minify.mangle.properties.regex);\n  const mangledCode = code.replace(regex, '');\n\n  // Apply the reserved property names to avoid mangling them\n  const reserved = minifyConfig.minify.mangle.properties.reserved;\n  const finalCode = mangledCode.replace(new RegExp(`\\\\b(${reserved.join('|')})\\\\b`, 'g'), '');\n\n  return finalCode;\n}\n\n// Example usage\nconst originalCode = 'function _privateMethod() { ... }';\nconst minifiedCode = minifyCode(originalCode);\nconsole.log(minifiedCode);\n// Output: function () { ... }\n```\n\nIn this example, the `minifyCode` function takes an original code as input and applies the regular expression pattern and reserved property names from the `minifyConfig` object to control the property mangling. The resulting minified code is then returned.",
  "questions": "1. **What is the purpose of this file?**\n   This file controls protected/private property mangling to ensure consistent property names in minified builds.\n\n2. **Why are there duplicate minified properties?**\n   Duplicate minified properties are used because most properties are only used on one type of objects, so they can have the same name without colliding. This helps reduce the size of the minified builds.\n\n3. **What properties are reserved and cannot be mangled?**\n   The reserved properties that cannot be mangled are \"__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED\", \"__REACT_DEVTOOLS_GLOBAL_HOOK__\", \"__PREACT_DEVTOOLS__\", \"_renderers\", \"__source\", and \"__self\"."
}